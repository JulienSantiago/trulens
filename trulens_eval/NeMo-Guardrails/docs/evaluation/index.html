
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Evaluate and track LLM applications. Explain Deep Neural Nets.">
      
      
      
      
      
      
      <link rel="icon" href="../../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Guardrails Evaluation - ü¶ë TruLens</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="trulens" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#guardrails-evaluation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ü¶ë TruLens" class="md-header__button md-logo" aria-label="ü¶ë TruLens" data-md-component="logo">
      
  <img src="../../../../img/squid.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ü¶ë TruLens
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Guardrails Evaluation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/truera/trulens" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    truera/trulens
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  üè† Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../getting_started/" class="md-tabs__link">
          
  
    
  
  üöÄ Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../evaluation/feedback_functions/" class="md-tabs__link">
          
  
    
  
  üéØ Evaluation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tracking/instrumentation/" class="md-tabs__link">
          
  
    
  
  üé∫ Tracking

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../guides/use_cases_any/" class="md-tabs__link">
          
  
    
  
  üîç Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/tru/" class="md-tabs__link">
          
  
    
  
  ‚òï API Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../contributing/" class="md-tabs__link">
          
  
    
  
  ü§ù Contributing

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../trulens_explain/getting_started/install/" class="md-tabs__link">
          
  
    
  
  ‚ùì Explain

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ü¶ë TruLens" class="md-nav__button md-logo" aria-label="ü¶ë TruLens" data-md-component="logo">
      
  <img src="../../../../img/squid.png" alt="logo">

    </a>
    ü¶ë TruLens
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/truera/trulens" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    truera/trulens
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üè† Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    üöÄ Getting Started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            üöÄ Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üî® Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üìì Quickstarts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            üìì Quickstarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì TruLens Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/existing_data_quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì TruLens with Outside Logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/langchain_quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì LangChain Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/llama_index_quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì LlamaIndex Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/text2text_quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Text to Text Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/groundtruth_evals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Ground Truth Evaluations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/quickstarts/human_feedback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Logging Human Feedback
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../getting_started/core_concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ‚≠ê Core Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            ‚≠ê Core Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/core_concepts/feedback_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚òî Feedback Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/core_concepts/rag_triad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚üÅ RAG Triad
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/core_concepts/honest_harmless_helpful_evals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üèÜ Honest, Harmless, Helpful Evals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üéØ Evaluation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            üéØ Evaluation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../evaluation/feedback_functions/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ‚òî Feedback Functions
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            ‚òî Feedback Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_functions/anatomy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü¶¥ Anatomy of a Feedback Function
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../evaluation/feedback_implementations/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Feedback Implementations
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Feedback Implementations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_implementations/stock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üß∞ Stock Feedback Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_implementations/custom_feedback_functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Custom Feedback Functions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../evaluation/feedback_selectors/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Feedback Selectors
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Feedback Selectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_selectors/selecting_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selecting Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_selectors/selector_shortcuts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Selector Shortcuts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../evaluation/feedback_aggregation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Feedback Aggregation
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Feedback Aggregation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Running Feedback Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Running Feedback Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/running_feedback_functions/with_app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running with your app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/running_feedback_functions/existing_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running on existing data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../evaluation/generate_test_cases/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Generating Test Cases
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Generating Test Cases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Feedback Evaluations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Feedback Evaluations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_evaluations/answer_relevance_benchmark_small/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Answer Relevance Feedback Evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_evaluations/comprehensiveness_benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Comprehensiveness Evaluations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_evaluations/context_relevance_benchmark_small/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Context Relevance Evaluations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_evaluations/context_relevance_benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Context Relevance Benchmarking: ranking is all you need.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evaluation/feedback_evaluations/groundedness_benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì Groundedness Evaluations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üé∫ Tracking
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            üé∫ Tracking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tracking/instrumentation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Instrumentation Overview
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Instrumentation Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tracking/instrumentation/langchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì ü¶úÔ∏èüîó LangChain Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tracking/instrumentation/llama_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì ü¶ô LlamaIndex Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tracking/instrumentation/nemo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìì NeMo Guardrails Integration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Logging
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Logging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tracking/logging/where_to_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Where to Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tracking/logging/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging Methods
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üîç Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            üîç Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/use_cases_any/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Any LLM App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/use_cases_rag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAGs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/use_cases_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM Agents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/use_cases_production/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dev to Prod
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ‚òï API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ‚òï API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/tru/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü¶ë Tru
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/app/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    App
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            App
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/trubasicapp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TruBasicApp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/truchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü¶úÔ∏èüîó TruChain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/trullama/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü¶ô TruLlama
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/trurails/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TruRails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/trucustom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TruCustom
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/app/truvirtual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚¨ö TruVirtual
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/feedback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feedback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/record/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üíæ Record
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/provider/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Provider
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            Provider
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/llmprovider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLMProvider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/provider/openai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    OpenAI
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_5_3" id="__nav_6_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5_3">
            <span class="md-nav__icon md-icon"></span>
            OpenAI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/openai/azureopenai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AzureOpenAI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/bedrock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Bedrock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/litellm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LiteLLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/langchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü¶úÔ∏èüîó LangChain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/provider/huggingface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ü§ó HuggingFace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/endpoint/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Endpoint
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_5_8" id="__nav_6_5_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5_8">
            <span class="md-nav__icon md-icon"></span>
            Endpoint
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/endpoint/openai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/instruments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ùÑ¢ Instruments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/database/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    üóÑ Database
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            üóÑ Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/database/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚ú® Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/database/sqlalchemy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üß™ SQLAlchemy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Utils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/utils/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/utils/serial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/utils/json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/utils/frameworks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Framework Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/utils/utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Misc. Utilities
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../contributing/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ü§ù Contributing
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            ü§ù Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üß≠ Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/standards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚úÖ Standards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/techdebt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üí£ Tech Debt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‚ú® Database Migration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ‚ùì Explain
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            ‚ùì Explain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/getting_started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/getting_started/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/attribution_parameterization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attributions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ‚òï API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            ‚òï API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/attribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/model_wrappers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/slices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/quantities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quantities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/distributions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distributions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trulens_explain/api/visualizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualizations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dialog-rails" class="md-nav__link">
    <span class="md-ellipsis">
      Dialog Rails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dialog Rails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aim-and-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Aim and Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-results" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-and-output-rails" class="md-nav__link">
    <span class="md-ellipsis">
      Input and Output Rails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Input and Output Rails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fact-checking-rails" class="md-nav__link">
    <span class="md-ellipsis">
      Fact-checking Rails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fact-checking Rails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#self-check" class="md-nav__link">
    <span class="md-ellipsis">
      Self-Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alignscore" class="md-nav__link">
    <span class="md-ellipsis">
      AlignScore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-results_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moderation-rails" class="md-nav__link">
    <span class="md-ellipsis">
      Moderation Rails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Moderation Rails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#self-check_1" class="md-nav__link">
    <span class="md-ellipsis">
      Self-Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-results_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moderation-rails-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Moderation Rails Performance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Moderation Rails Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#llamaguard-based-moderation-rails-performance" class="md-nav__link">
    <span class="md-ellipsis">
      LlamaGuard-based Moderation Rails Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hallucination-rails" class="md-nav__link">
    <span class="md-ellipsis">
      Hallucination Rails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hallucination Rails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#self-check_2" class="md-nav__link">
    <span class="md-ellipsis">
      Self-Check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-results_3" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation Results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="guardrails-evaluation">Guardrails Evaluation<a class="headerlink" href="#guardrails-evaluation" title="Permanent link">&para;</a></h1>
<p>NeMo Guardrails includes a set of tools that you can use to evaluate the different types of rails. In the current version, these tools test the performance of each type of rail individually. You can use the evaluation tools through the <code>nemoguardrails</code> CLI. Examples will be provided for each type of rail.</p>
<p>At the same time, we provide preliminary results on the performance of the rails on a set of public datasets that are relevant to each task at hand.</p>
<h2 id="dialog-rails">Dialog Rails<a class="headerlink" href="#dialog-rails" title="Permanent link">&para;</a></h2>
<h3 id="aim-and-usage">Aim and Usage<a class="headerlink" href="#aim-and-usage" title="Permanent link">&para;</a></h3>
<p>Dialog rails evaluation focuses on NeMo Guardrails's core mechanism to guide conversations using canonical forms and dialogue flows.
More details about this core functionality are explained <a href="../architecture/">here</a>.</p>
<p>Thus, when using dialog rails evaluation, we are assessing the performance for:</p>
<ol>
<li>User canonical form (intent) generation.</li>
<li>Next step generation - in the current approach, we only assess the performance of bot canonical forms as next step in a flow.</li>
<li>Bot message generation.</li>
</ol>
<p>The CLI command for evaluating the dialog rails is:</p>
<div class="highlight"><pre><span></span><code>nemoguardrails<span class="w"> </span>evaluate<span class="w"> </span>topical<span class="w"> </span>--config<span class="o">=</span>&lt;rails_app_path&gt;<span class="w"> </span>--verbose
</code></pre></div>
<p>A dialog rails evaluation has the following CLI parameters:</p>
<ul>
<li><code>config</code>: The Guardrails app to be evaluated.</li>
<li><code>verbose</code>: If the Guardrails app should be run in verbose mode.</li>
<li><code>test-percentage</code>: Percentage of the samples for an intent to be used as test set.</li>
<li><code>max-tests-intent</code>: Maximum number of test samples per intent to be used when testing (useful to have balanced test data for unbalanced datasets). If the value is 0, this parameter is not used.</li>
<li><code>max-samples-intent</code>: Maximum number of samples per intent to be used in the vector database. If the value is 0, all samples not in test set are used.</li>
<li><code>results-frequency</code>: If we want to print intermediate results about the
current evaluation, this is the step.</li>
<li><code>sim-threshold</code>: If larger than 0, for intents that do not have an exact match, pick the most similar intent above this threshold.</li>
<li><code>random-seed</code>: Random seed used by the evaluation.</li>
<li><code>output-dir</code>: Output directory for predictions.</li>
</ul>
<h3 id="evaluation-results">Evaluation Results<a class="headerlink" href="#evaluation-results" title="Permanent link">&para;</a></h3>
<p>For the initial evaluation experiments for dialog rails, we have used two datasets for conversational NLU:</p>
<ul>
<li><a href="https://github.com/rahul051296/small-talk-rasa-stack"><em>chit-chat</em></a> dataset</li>
<li><a href="https://github.com/PolyAI-LDN/task-specific-datasets/tree/master/banking_data"><em>banking</em></a> dataset</li>
</ul>
<p>The datasets were transformed into a NeMo Guardrails app by defining canonical forms for each intent, specific dialogue flows, and even bot messages (for the <em>chit-chat</em> dataset alone).
The two datasets have a large number of user intents, thus dialog rails. One of them is very generic and has higher-grained intents (<em>chit-chat</em>), while the <em>banking</em> dataset is domain-specific and more fine-grained.
More details about running the dialog rails evaluation experiments and the evaluation datasets are available <a href="./../../nemoguardrails/eval/data/topical/README.md">here</a>.</p>
<p>Preliminary evaluation results follow next. In all experiments, we have chosen to have a balanced test set with at most 3 samples per intent.
For both datasets, we have assessed the performance for various LLMs and also for the number of samples (<code>k = all, 3, 1</code>) per intent that are indexed in the vector database.</p>
<p>Take into account that the performance of an LLM is heavily dependent on the prompt, especially due to the more complex <a href="../architecture/#example-prompt">prompt used by Guardrails</a>.
Therefore, currently, we only release the results for OpenAI models, but more results will follow in the next releases. All results are preliminary, as better prompting can improve them.</p>
<p>Important lessons to be learned from the evaluation results:</p>
<ul>
<li>Each step in the three-step approach (user intent, next step/bot intent, bot message) used by Guardrails offers an improvement in performance.</li>
<li>It is important to have at least k=3 samples in the vector database for each user intent (canonical form) to achieve good performance.</li>
<li>Some models (e.g., gpt-3.5-turbo) produce a wider variety of canonical forms, even with the few-shot prompting used by Guardrails. In these cases, it is useful to add a similarity match instead of exact match for user intents. In this case, the similarity threshold becomes an important inference parameter.</li>
<li>Initial results show that even small models, e.g. <a href="https://huggingface.co/databricks/dolly-v2-3b">dolly-v2-3b</a>, <a href="https://huggingface.co/lmsys/vicuna-7b-v1.3">vicuna-7b-v1.3</a>, <a href="https://huggingface.co/mosaicml/mpt-7b-instruct">mpt-7b-instruct</a>, <a href="https://huggingface.co/tiiuae/falcon-7b-instruct">falcon-7b-instruct</a> have good performance for topical rails.</li>
<li>Using a single call for topical rails shows similar results to the default method (which uses up to 3 LLM calls for generating the final bot message) in most cases for <code>text-davinci-003</code> model.</li>
<li>Initial experiments show that using compact prompts has similar or even better performance on these two datasets compared to using the longer prompts.</li>
</ul>
<p>Evaluation Date - June 21, 2023. Updated July 24, 2023 for Dolly, Vicuna and Mosaic MPT models. Updated Mar 13 2024 for <code>gemini-1.0-pro</code> and <code>text-bison</code>.</p>
<table>
<thead>
<tr>
<th>Dataset</th>
<th># intents</th>
<th># test samples</th>
</tr>
</thead>
<tbody>
<tr>
<td>chit-chat</td>
<td>76</td>
<td>226</td>
</tr>
<tr>
<td>banking</td>
<td>77</td>
<td>231</td>
</tr>
</tbody>
</table>
<p>Results on <em>chit-chat</em> dataset, metric used is accuracy.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>User intent, <code>w.o sim</code></th>
<th>User intent, <code>sim=0.6</code></th>
<th>Bot intent, <code>w.o sim</code></th>
<th>Bot intent, <code>sim=0.6</code></th>
<th>Bot message, <code>w.o sim</code></th>
<th>Bot message, <code>sim=0.6</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpt-3.5-turbo-instruct, k=all</code></td>
<td>0.88</td>
<td>N/A</td>
<td>0.88</td>
<td>N/A</td>
<td>0.88</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo-instruct, single call</code></td>
<td>0.90</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo-instruct, compact</code></td>
<td>0.89</td>
<td>N/A</td>
<td>0.89</td>
<td>N/A</td>
<td>0.90</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo, k=all</code></td>
<td>0.44</td>
<td>0.56</td>
<td>0.50</td>
<td>0.61</td>
<td>0.54</td>
<td>0.65</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all</code></td>
<td>0.89</td>
<td>0.89</td>
<td>0.90</td>
<td>0.90</td>
<td>0.91</td>
<td>0.91</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all, single call</code></td>
<td>0.89</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all, compact</code></td>
<td>0.90</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
<td>0.91</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=3</code></td>
<td>0.82</td>
<td>N/A</td>
<td>0.85</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=1</code></td>
<td>0.65</td>
<td>N/A</td>
<td>0.73</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>llama2-13b-chat, k=all</code></td>
<td>0.87</td>
<td>N/A</td>
<td>0.88</td>
<td>N/A</td>
<td>0.89</td>
<td>N/A</td>
</tr>
<tr>
<td><code>dolly-v2-3b, k=all</code></td>
<td>0.80</td>
<td>0.82</td>
<td>0.81</td>
<td>0.83</td>
<td>0.81</td>
<td>0.83</td>
</tr>
<tr>
<td><code>vicuna-7b-v1.3, k=all</code></td>
<td>0.62</td>
<td>0.75</td>
<td>0.69</td>
<td>0.77</td>
<td>0.71</td>
<td>0.79</td>
</tr>
<tr>
<td><code>mpt-7b-instruct, k=all</code></td>
<td>0.73</td>
<td>0.81</td>
<td>0.78</td>
<td>0.82</td>
<td>0.80</td>
<td>0.82</td>
</tr>
<tr>
<td><code>falcon-7b-instruct, k=all</code></td>
<td>0.81</td>
<td>0.81</td>
<td>0.81</td>
<td>0.82</td>
<td>0.82</td>
<td>0.82</td>
</tr>
<tr>
<td><code>gemini-1.0-pro</code></td>
<td>0.79</td>
<td>0.79</td>
<td>0.80</td>
<td>0.80</td>
<td>0.80</td>
<td>0.80</td>
</tr>
<tr>
<td><code>gemini-1.0-pro, single call</code></td>
<td>0.76</td>
<td>0.76</td>
<td>0.78</td>
<td>0.77</td>
<td>0.78</td>
<td>0.77</td>
</tr>
<tr>
<td><code>text-bison</code></td>
<td>0.63</td>
<td>0.75</td>
<td>0.67</td>
<td>0.78</td>
<td>0.70</td>
<td>0.79</td>
</tr>
<tr>
<td><code>text-bison, single call</code></td>
<td>0.65</td>
<td>0.75</td>
<td>0.71</td>
<td>0.77</td>
<td>0.73</td>
<td>0.80</td>
</tr>
</tbody>
</table>
<p>Results on <em>banking</em> dataset, metric used is accuracy.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>User intent, <code>w.o sim</code></th>
<th>User intent, <code>sim=0.6</code></th>
<th>Bot intent, <code>w.o sim</code></th>
<th>Bot intent, <code>sim=0.6</code></th>
<th>Bot message, <code>w.o sim</code></th>
<th>Bot message, <code>sim=0.6</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpt-3.5-turbo-instruct, k=all</code></td>
<td>0.73</td>
<td>N/A</td>
<td>0.74</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo-instruct, single call</code></td>
<td>0.81</td>
<td>N/A</td>
<td>0.83</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo-instruct, compact</code></td>
<td>0.86</td>
<td>N/A</td>
<td>0.87</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gpt-3.5-turbo, k=all</code></td>
<td>0.38</td>
<td>0.73</td>
<td>0.45</td>
<td>0.73</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all</code></td>
<td>0.77</td>
<td>0.82</td>
<td>0.83</td>
<td>0.84</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all, single call</code></td>
<td>0.75</td>
<td>N/A</td>
<td>0.81</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=all, compact</code></td>
<td>0.86</td>
<td>N/A</td>
<td>0.86</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=3</code></td>
<td>0.65</td>
<td>N/A</td>
<td>0.73</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-davinci-003, k=1</code></td>
<td>0.50</td>
<td>N/A</td>
<td>0.63</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>llama2-13b-chat, k=all</code></td>
<td>0.76</td>
<td>N/A</td>
<td>0.77</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>dolly-v2-3b, k=all</code></td>
<td>0.32</td>
<td>0.62</td>
<td>0.40</td>
<td>0.64</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>vicuna-7b-v1.3, k=all</code></td>
<td>0.39</td>
<td>0.62</td>
<td>0.54</td>
<td>0.65</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>mpt-7b-instruct, k=all</code></td>
<td>0.45</td>
<td>0.58</td>
<td>0.50</td>
<td>0.60</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>falcon-7b-instruct, k=all</code></td>
<td>0.70</td>
<td>0.75</td>
<td>0.76</td>
<td>0.78</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gemini-1.0-pro</code></td>
<td>0.89</td>
<td>0.88</td>
<td>0.87</td>
<td>0.91</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>gemini-1.0-pro, single call</code></td>
<td>0.89</td>
<td>0.89</td>
<td>0.90</td>
<td>0.89</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-bison</code></td>
<td>0.85</td>
<td>0.92</td>
<td>0.89</td>
<td>0.94</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td><code>text-bison, single call</code></td>
<td>0.91</td>
<td>0.89</td>
<td>0.92</td>
<td>0.90</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h2 id="input-and-output-rails">Input and Output Rails<a class="headerlink" href="#input-and-output-rails" title="Permanent link">&para;</a></h2>
<h3 id="fact-checking-rails">Fact-checking Rails<a class="headerlink" href="#fact-checking-rails" title="Permanent link">&para;</a></h3>
<p>In the <a href="../user_guides/guardrails-library/">Guardrails library</a>, we provide two approaches out of the box for the fact-checking rail: the Self-Check fact-checking and AlignScore. For more details, read the <a href="../user_guides/guardrails-library/">library guide</a>.</p>
<h4 id="self-check">Self-Check<a class="headerlink" href="#self-check" title="Permanent link">&para;</a></h4>
<p>In this approach, the fact-checking rail is implemented as an entailment prediction problem. Given an evidence passage and the predicted answer, we prompt an LLM to predict yes/no whether the answer is grounded in the evidence or not. This is the default approach.</p>
<h4 id="alignscore">AlignScore<a class="headerlink" href="#alignscore" title="Permanent link">&para;</a></h4>
<p>This approach is based on the AlignScore model <a href="https://aclanthology.org/2023.acl-long.634.pdf">Zha et al. 2023</a>. Given an evidence passage and the predicted answer, the model is finetuned to predict that they are aligned when:</p>
<ol>
<li>All information in the predicted answer is present in the evidence passage, and</li>
<li>None of the information in the predicted answer contradicts the evidence passage.
The response is a value between 0.0 and 1.0. In our testing, the best average accuracies were observed with a threshold of 0.7.</li>
</ol>
<p>Please see the <a href="../user_guides/guardrails-library/#alignscore">user guide documentation</a> for detailed steps on how to configure your deployment to use AlignScore.</p>
<h4 id="evaluation">Evaluation<a class="headerlink" href="#evaluation" title="Permanent link">&para;</a></h4>
<p>To run the fact-checking rail, you can use the following CLI command:</p>
<div class="highlight"><pre><span></span><code>nemoguardrails<span class="w"> </span>evaluate<span class="w"> </span>fact-checking<span class="w"> </span>--config<span class="o">=</span>path/to/guardrails/config
</code></pre></div>
<p>Here is a list of arguments that you can use to configure the fact-checking rail:</p>
<ul>
<li><code>config</code>: The path to the guardrails configuration (this includes the LLM, the prompts and any other information).</li>
<li>
<p><code>dataset-path</code>: Path to the dataset. It should be a JSON file with the following format:</p>
<div class="highlight"><pre><span></span><code>[
    {
        &quot;question&quot;: &quot;question text&quot;,
        &quot;answer&quot;: &quot;answer text&quot;,
        &quot;evidence&quot;: &quot;evidence text&quot;,
    },
}
</code></pre></div>
</li>
<li>
<p><code>num-samples</code>: Number of samples to run the eval on. The default is 50.</p>
</li>
<li><code>create-negatives</code>: Whether to generate synthetic negative examples or not. The default is <code>True</code>.</li>
<li><code>output-dir</code>: The directory to save the output to. The default is <code>eval_outputs/factchecking</code>.</li>
<li><code>write-outputs</code>: Whether to write the outputs to a file or not. The default is <code>True</code>.</li>
</ul>
<p>More details on how to set up the data in the right format and run the evaluation on your own dataset can be found <a href="./../../nemoguardrails/eval/data/factchecking/README.md">here</a>.</p>
<h4 id="evaluation-results_1">Evaluation Results<a class="headerlink" href="#evaluation-results_1" title="Permanent link">&para;</a></h4>
<p>Evaluation Date - Nov 23, 2023 (Mar 7 2024 for <code>gemini-1.0-pro</code>).</p>
<p>We evaluate the performance of the fact-checking rail on the <a href="https://huggingface.co/datasets/ms_marco">MSMARCO</a> dataset using the Self-Check and the AlignScore approaches. To build the dataset, we randomly sample 100 (question, correct answer, evidence) triples, and then, for each triple, build a non-factual or incorrect answer to yield 100 (question, incorrect answer, evidence) triples.</p>
<p>We breakdown the performance into positive entailment accuracy and negative entailment accuracy. Positive entailment accuracy is the accuracy of the model in correctly identifying answers that are grounded in the evidence passage. Negative entailment accuracy is the accuracy of the model in correctly identifying answers that are <strong>not</strong> supported in the evidence. Details on how to create synthetic negative examples can be found <a href="./../../nemoguardrails/eval/data/factchecking/README.md">here</a></p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Positive Entailment Accuracy</th>
<th>Negative Entailment Accuracy</th>
<th>Overall Accuracy</th>
<th>Average Time Per Checked Fact (ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td><strong>92.0%</strong></td>
<td>69.0%</td>
<td>80.5%</td>
<td>188.8ms</td>
</tr>
<tr>
<td>gpt-3.5-turbo</td>
<td>76.0%</td>
<td>89.0%</td>
<td>82.5%</td>
<td>435.1ms</td>
</tr>
<tr>
<td>text-davinci-003</td>
<td>70.0%</td>
<td><strong>93.0%</strong></td>
<td>81.5%</td>
<td>272.2ms</td>
</tr>
<tr>
<td>gemini-1.0-pro</td>
<td><strong>92.0%</strong></td>
<td><strong>93.0%</strong></td>
<td><strong>92.5%</strong></td>
<td>704.5ms</td>
</tr>
<tr>
<td>align_score-base*</td>
<td>81.0%</td>
<td>88.0%</td>
<td>84.5%</td>
<td><strong>23.0ms</strong> ^</td>
</tr>
<tr>
<td>align_score-large*</td>
<td>87.0%</td>
<td>90.0%</td>
<td><strong>88.5%</strong></td>
<td>46.0ms ^</td>
</tr>
</tbody>
</table>
<p>*The threshold used for align_score is 0.7, i.e. an align_score &gt;= 0.7 is considered a factual statement, and an align_score &lt; 0.7 signifies an incorrect statement.
^When the AlignScore model is loaded in-memory and inference is carried out without network overheads, i.e., not as a RESTful service.</p>
<h3 id="moderation-rails">Moderation Rails<a class="headerlink" href="#moderation-rails" title="Permanent link">&para;</a></h3>
<p>The moderation involves two components: input and output moderation.</p>
<ul>
<li>The input moderation attempts to block user inputs that are designed to elicit harmful responses from the bot.</li>
<li>The output moderation attempts to filter the language model output to avoid unsafe content from being displayed to the user.</li>
</ul>
<h4 id="self-check_1">Self-Check<a class="headerlink" href="#self-check_1" title="Permanent link">&para;</a></h4>
<p>This rail will prompt the LLM using a custom prompt for input (jailbreak) and output moderation.
Common reasons for rejecting the input from the user include jailbreak attempts, harmful or abusive content, or other inappropriate instructions.
For more details, consult the <a href="[Guardrails library](./../../docs/user_guides/guardrails-library.md)">Guardrails library</a> guide.</p>
<h4 id="evaluation_1">Evaluation<a class="headerlink" href="#evaluation_1" title="Permanent link">&para;</a></h4>
<p>The jailbreak and output moderation can be evaluated using the following CLI command:</p>
<div class="highlight"><pre><span></span><code>nemoguardrails<span class="w"> </span>evaluate<span class="w"> </span>moderation<span class="w"> </span>--config<span class="o">=</span>path/to/guardrails/config
</code></pre></div>
<p>The various arguments that can be passed to evaluate the moderation rails are</p>
<ul>
<li><code>config</code>: The path to the guardrails configuration (this includes the LLM, the prompts and any other information).</li>
<li><code>dataset-path</code>: Path to the dataset to evaluate the rails on. The dataset should contain one prompt per line.</li>
<li><code>split</code>: The split of the dataset to evaluate on. Choices are 'helpful' or 'harmful'. This selection is used to determine the appropriate label for the predictions.</li>
<li><code>num-samples</code>: Number of samples to evaluate. Default is 50.</li>
<li><code>check-input</code>: Whether to evaluate the input moderation rail. Default is True.</li>
<li><code>check-output</code>: Whether to evaluate the output moderation rail. Default is True.</li>
<li><code>output-path</code>: Folder to write the results to. Default is 'eval_outputs/moderation'.</li>
</ul>
<p>It is also possible to evaluate each of the rails individually. To evaluate the input rail only, use the following command:</p>
<p><code>nemoguardrails evaluate moderation --check-output False --config=path/to/guardrails/config</code></p>
<p>To evaluate the output moderation rail only, use the following command:</p>
<p><code>nemoguardrails evaluate moderation --check-input False --config=path/to/guardrails/config</code></p>
<p>More details on how to set up the data in the right format and run the evaluation on your own dataset can be found <a href="./../../nemoguardrails/eval/data/moderation/README.md">here</a>.</p>
<h4 id="evaluation-results_2">Evaluation Results<a class="headerlink" href="#evaluation-results_2" title="Permanent link">&para;</a></h4>
<p>We evaluate the moderation rails on the Anthropic <a href="https://huggingface.co/datasets/Anthropic/hh-rlhf/tree/main/red-team-attempts">Red Team Attempts dataset</a> and the Anthropic <a href="https://huggingface.co/datasets/Anthropic/hh-rlhf/tree/main/helpful-base">Helpful Base dataset</a>. This dataset contains prompts that are labeled by humans as either helpful or harmful. We randomly sample 100 prompts from each of the splits and run the evaluation using OpenAI <code>text-davinci-003</code> and <code>gpt-3.5-turbo</code> models.</p>
<p>Evaluation Date - June 02, 2023 (Mar 13 2024 for <code>gemini-1.0-pro</code>).</p>
<p>We breakdown the performance of the models on the two rails into the following metrics:</p>
<ul>
<li>% of the prompts that are <strong>blocked</strong> on the Red Team Attempts dataset</li>
<li>% of the prompts that are <strong>allowed</strong> on the Helpful Base dataset</li>
</ul>
<p>We want the models to block as many harmful prompts as possible and allow as many helpful prompts as possible.</p>
<h4 id="moderation-rails-performance">Moderation Rails Performance<a class="headerlink" href="#moderation-rails-performance" title="Permanent link">&para;</a></h4>
<p>These results are using the <em>Simple</em> prompt defined in the LLM Self-Checking method. For more details, see the <a href="../user_guides/guardrails-library/">Guardrails library</a>.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>% of harmful prompts blocked</th>
<th>% harmful prompts triggering model errors</th>
<th>% of helpful prompts allowed</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td>78</td>
<td>0</td>
<td>97</td>
</tr>
<tr>
<td>gpt-3.5-turbo</td>
<td>70</td>
<td>0</td>
<td>100</td>
</tr>
<tr>
<td>text-davinci-003</td>
<td>80</td>
<td>0</td>
<td>97</td>
</tr>
<tr>
<td>nemollm-43b</td>
<td>88</td>
<td>0</td>
<td>84</td>
</tr>
<tr>
<td>gemini-1.0-pro</td>
<td>63</td>
<td>36<sup>*</sup></td>
<td>97</td>
</tr>
</tbody>
</table>
<p><sup>*</sup> Note that as of Mar 13, 2024 <code>gemini-1.0-pro</code> when queried via the Vertex AI API occasionally produces <a href="https://github.com/GoogleCloudPlatform/generative-ai/issues/344">this error</a>. Note that this occurs with a self check prompt, that is when the model is given an input where it is asked to give a yes / no answer to whether it should respond to a particular input. We report these separately since this behavior is triggered by the self check prompt itself in which case it is debatable whether this behavior should be treated as effective moderation or being triggered by a false positive.</p>
<h5 id="llamaguard-based-moderation-rails-performance">LlamaGuard-based Moderation Rails Performance<a class="headerlink" href="#llamaguard-based-moderation-rails-performance" title="Permanent link">&para;</a></h5>
<p>Evaluation date: January 8, 2024.</p>
<p>Guardrails offers out-of-the-box support for Meta's new Llama Guard model for input/output moderation.
Below, we evaluate Llama Guard and compare it to the self-checking approach with the <em>Complex</em> prompt for two popular datasets.</p>
<p>Results on the OpenAI Moderation test set
Dataset size: 1,680
Number of user inputs labeled harmful: 552 (31.1%)</p>
<table>
<thead>
<tr>
<th>Main LLM</th>
<th>Input Rail</th>
<th>Accuracy</th>
<th>Precision</th>
<th>Recall</th>
<th>F1 score</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td>self check input</td>
<td>65.9%</td>
<td>0.47</td>
<td>0.88</td>
<td>0.62</td>
</tr>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td>llama guard check input</td>
<td>81.9%</td>
<td>0.73</td>
<td>0.66</td>
<td>0.69</td>
</tr>
</tbody>
</table>
<p>Results on the ToxicChat dataset:
Dataset size: 10,165
Number of user inputs labeled harmful: 730 (7.2%)</p>
<table>
<thead>
<tr>
<th>Main LLM</th>
<th>Input Rail</th>
<th>Accuracy</th>
<th>Precision</th>
<th>Recall</th>
<th>F1 score</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td>self check input</td>
<td>66.5%</td>
<td>0.16</td>
<td>0.85</td>
<td>0.27</td>
</tr>
<tr>
<td>gpt-3.5-turbo-instruct</td>
<td>llama guard check input</td>
<td>94.4%</td>
<td>0.67</td>
<td>0.44</td>
<td>0.53</td>
</tr>
</tbody>
</table>
<p>The low precision and high recall numbers from the self check input with the complex prompt indicates an overly defensive behavior from the self check input rail. We will run this evaluation with more variations of the self check prompt and report numbers.</p>
<h3 id="hallucination-rails">Hallucination Rails<a class="headerlink" href="#hallucination-rails" title="Permanent link">&para;</a></h3>
<p>For general questions that the model uses parametric knowledge to answer, we can define a hallucination rail to detect when the model is potentially making up facts. The default implementation of the hallucination rails is based on <a href="https://arxiv.org/abs/2303.08896">SelfCheckGPT</a>.</p>
<ul>
<li>Given a question, we sample multiple answers from the model, often at a high temperature (temp=1.0).</li>
<li>We then check if the answers are consistent with each other. This agreement check is implemented using an LLM call similar to the fact checking rail.</li>
<li>If the answers are inconsistent, it indicates that the model might be hallucinating.</li>
</ul>
<h4 id="self-check_2">Self-Check<a class="headerlink" href="#self-check_2" title="Permanent link">&para;</a></h4>
<p>This rail will use the LLM for self-checking with a custom prompt if the answers are inconsistent. The custom prompt can be similar to an NLI task.
For more details, consult the <a href="[Guardrails library](./../../docs/user_guides/guardrails-library.md)">Guardrails library</a> guide.</p>
<h4 id="evaluation_2">Evaluation<a class="headerlink" href="#evaluation_2" title="Permanent link">&para;</a></h4>
<p>To run the hallucination rail, use the following CLI command:</p>
<div class="highlight"><pre><span></span><code>nemoguardrails<span class="w"> </span>evaluate<span class="w"> </span>hallucination<span class="w"> </span>--config<span class="o">=</span>path/to/guardrails/config
</code></pre></div>
<p>Here is a list of arguments that you can use to configure the hallucination rail:</p>
<ul>
<li><code>config</code>: The path to the guardrails configuration (this includes the LLM, the prompts and any other information).</li>
<li><code>dataset-path</code>: Path to the dataset. It should be a text file with one question per line.</li>
<li><code>num-samples</code>: Number of samples to run the eval on. Default is 50.</li>
<li><code>output-dir</code>: The directory to save the output to. Default is eval_outputs/hallucination.</li>
<li><code>write-outputs</code>: Whether to write the outputs to a file or not. Default is True.</li>
</ul>
<p>To evaluate the hallucination rail on your own dataset, you can follow the create a text file with the list of questions and run the evaluation using the following command</p>
<p><code>nemoguardrails evaluate hallucination --dataset-path &lt;path-to-your-text-file&gt;</code></p>
<h4 id="evaluation-results_3">Evaluation Results<a class="headerlink" href="#evaluation-results_3" title="Permanent link">&para;</a></h4>
<p>To evaluate the hallucination rail, we manually curate a set of <a href="./../../nemoguardrails/eval/data/hallucination/sample.txt">questions</a> which mainly consists of questions with a false premise, i.e., questions that cannot have a correct answer.</p>
<p>For example, the question "What is the capital of the moon?" has a false premise since the moon does not have a capital. Since the question is stated in a way that implies that the moon has a capital, the model might be tempted to make up a fact and answer the question.</p>
<p>We then run the hallucination rail on these questions and check if the model is able to detect the hallucination. We run the evaluation using OpenAI <code>text-davinci-003</code> and <code>gpt-3.5-turbo</code> models.</p>
<p>Evaluation Date - June 12, 2023 (Mar 13 2024 for <code>gemini-1.0-pro</code>).</p>
<p>We breakdown the performance into the following metrics:</p>
<ul>
<li>% of questions that are intercepted by the model, i.e., % of questions where the model detects are not answerable</li>
<li>% of questions that are intercepted by model + hallucination rail, i.e., % of questions where the either the model detects are not answerable or the hallucination rail detects that the model is making up facts</li>
</ul>
<table>
<thead>
<tr>
<th>Model</th>
<th>% intercepted - model</th>
<th>% intercepted - model + hallucination rail</th>
<th>% model errored out</th>
</tr>
</thead>
<tbody>
<tr>
<td>text-davinci-003</td>
<td>0</td>
<td>70</td>
<td>0</td>
</tr>
<tr>
<td>gpt-3.5-turbo</td>
<td>65</td>
<td>90</td>
<td>0</td>
</tr>
<tr>
<td>gemini-1.0-pro</td>
<td>60</td>
<td>80</td>
<td>6.7<sup>*</sup></td>
</tr>
</tbody>
</table>
<p>We find that gpt-3.5-turbo is able to intercept 65% of the questions and identify them as not answerable on its own. Adding the hallucination rail helps intercepts 25% more questions and prevents the model from making up facts.</p>
<p><sup>*</sup> Vertex AI models sometimes error out on hallucination and moderation tests due to <a href="https://github.com/GoogleCloudPlatform/generative-ai/issues/344">this issue</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.indexes", "navigation.top", "navigation.tabs", "navigation.sections", "navigation.tracking", "navigation.path", "search.share", "search.suggest", "toc.follow", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="../../../../javascript/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="../../../../javascript/tex-mml-chtml-3.0.0.js"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>